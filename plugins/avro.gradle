avro {
    createSetters = true
    createOptionalGetters = false
    gettersReturnOptional = false
    optionalGettersForNullableFieldsOnly = true
    fieldVisibility = 'PRIVATE'
    outputCharacterEncoding = 'UTF-8'
    stringType = 'String'
    templateDirectory = null
    enableDecimalLogicalType = true
}


schemaRegistry {

    url = findProperty('schema.registry.url')
    quiet = false

    if (project.hasProperty('schema.registry.password')) {
        credentials {
            username = findProperty('schema.registry.username')
            password = findProperty('schema.registry.password')
        }
    }

    register {
        subject('io.github.leofuso.obs.demo.events.StatementLine', 'src/main/avro/obs.statement-line.avsc', 'AVRO')
        subject('io.github.leofuso.obs.demo.events.Receipt', 'src/main/avro/obs.receipt.avsc', 'AVRO')
    }

    compatibility {
        subject('io.github.leofuso.obs.demo.events.StatementLine', 'src/main/avro/obs.statement-line.avsc', 'AVRO')
        subject('io.github.leofuso.obs.demo.events.Receipt', 'src/main/avro/obs.receipt.avsc', 'AVRO')
    }

    config {
        subject('io.github.leofuso.obs.demo.events.StatementLine', 'BACKWARD_TRANSITIVE')
        subject('io.github.leofuso.obs.demo.events.Receipt', 'BACKWARD_TRANSITIVE')
    }
}